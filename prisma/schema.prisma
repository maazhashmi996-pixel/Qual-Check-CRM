// prisma/schema.prisma

generator client {
  provider = "prisma-client-node"
}

datasource db {
  provider = "postgresql" // Ya "mysql" agar aap wo use kar rahe hain
  url      = env("DATABASE_URL")
}

enum Role {
  STUDENT
  ADMIN
  UNIVERSITY
}

enum RequestStatus {
  SUBMITTED
  IN_PROGRESS
  AWAITING_DOCUMENTS
  COMPLETED
  REJECTED
}

model User {
  id              String   @id @default(uuid())
  email           String   @unique
  password        String
  name            String
  role            Role     @default(STUDENT)
  isApproved      Boolean  @default(false) // Admin approval check
  isEmailVerified Boolean  @default(false)
  createdAt       DateTime @default(now())
  requests        VerificationRequest[]
}

model VerificationRequest {
  id                String        @id @default(uuid())
  studentId         String
  student           User          @relation(fields: [studentId], references: [id])
  serviceType       String        // Academic, Employment, etc.
  status            RequestStatus @default(SUBMITTED)
  
  // Qualification Details
  fullName          String
  universityName    String
  degreeTitle       String
  graduationYear    Int
  registrationNo    String
  
  // Files (URLs from S3/Cloudinary)
  degreeDoc         String
  transcriptDoc     String
  passportDoc       String
  
  // Admin's Verified Report
  verifiedReportUrl String?       // Admin upload karega verification ke baad
  accessCode        String?       @unique // University ko check karne ke liye code
  
  isPaid            Boolean       @default(false)
  createdAt         DateTime      @default(now())
}